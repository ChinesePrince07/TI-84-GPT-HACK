<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TI-84 GPT Hack - System Diagram</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css">
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.js"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/contrib/auto-render.min.js"
        onload="renderMathInElement(document.body, {delimiters: [{left: '$$', right: '$$', display: true}, {left: '$', right: '$', display: false}]});"></script>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body {
            font-family: 'Segoe UI', sans-serif;
            background: linear-gradient(135deg, #0f0f23 0%, #1a1a3e 100%);
            min-height: 100vh;
            padding: 30px;
            color: #fff;
        }
        .container { max-width: 1200px; margin: 0 auto; }
        h1 {
            text-align: center;
            font-size: 2.2em;
            margin-bottom: 30px;
            color: #00d4ff;
        }
        .diagram-section {
            background: rgba(255,255,255,0.03);
            border: 2px solid #333;
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 25px;
        }
        .diagram-section h2 {
            color: #ffd700;
            margin-bottom: 20px;
            font-size: 1.4em;
            border-bottom: 1px solid #444;
            padding-bottom: 10px;
        }
        .svg-container {
            background: #fff;
            border-radius: 10px;
            padding: 15px;
            margin: 15px 0;
        }
        .wire-legend {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 15px;
            margin-top: 20px;
        }
        .wire-item {
            display: flex;
            align-items: flex-start;
            gap: 12px;
            padding: 15px;
            background: rgba(255,255,255,0.05);
            border-radius: 8px;
        }
        .wire-color {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            flex-shrink: 0;
            border: 3px solid #fff;
        }
        .wire-info h4 { color: #00d4ff; margin-bottom: 5px; }
        .wire-info p { font-size: 0.9em; color: #ccc; line-height: 1.5; }
        .component-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
            margin-top: 15px;
        }
        .component-card {
            background: rgba(255,255,255,0.05);
            border-radius: 10px;
            padding: 15px;
            text-align: center;
        }
        .component-card h4 {
            color: #00d4ff;
            margin-bottom: 8px;
        }
        .component-card p {
            font-size: 0.85em;
            color: #aaa;
            line-height: 1.5;
        }
        .equation-box {
            background: rgba(0,212,255,0.1);
            padding: 15px;
            border-radius: 8px;
            text-align: center;
            margin: 15px 0;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>TI-84 HACKS by AndyPandy - System Overview</h1>

        <!-- System Flow Diagram -->
        <div class="diagram-section">
            <h2>How It Works</h2>
            <div class="svg-container">
                <svg width="100%" height="200" viewBox="0 0 900 200">
                    <rect width="900" height="200" fill="#f8f9fa"/>

                    <!-- TI-84 Calculator -->
                    <rect x="30" y="50" width="140" height="100" rx="10" fill="#2d3436" stroke="#636e72" stroke-width="2"/>
                    <rect x="45" y="60" width="110" height="50" fill="#b8e994"/>
                    <text x="100" y="90" text-anchor="middle" font-size="12" fill="#2d3436" font-weight="bold">TI-84</text>
                    <text x="100" y="140" text-anchor="middle" font-size="11" fill="#fff">Calculator</text>

                    <!-- Arrow 1 -->
                    <line x1="170" y1="100" x2="230" y2="100" stroke="#e17055" stroke-width="3"/>
                    <polygon points="230,100 220,94 220,106" fill="#e17055"/>
                    <text x="200" y="85" text-anchor="middle" font-size="10" fill="#333">Link Port</text>
                    <text x="200" y="125" text-anchor="middle" font-size="9" fill="#666">TIP/RING</text>

                    <!-- PCB Module -->
                    <rect x="240" y="40" width="160" height="120" rx="8" fill="#00b894" stroke="#00a381" stroke-width="2"/>
                    <text x="320" y="65" text-anchor="middle" font-size="12" fill="#fff" font-weight="bold">Andy's PCB</text>
                    <rect x="255" y="75" width="50" height="25" rx="3" fill="#fdcb6e"/>
                    <text x="280" y="92" text-anchor="middle" font-size="8" fill="#333">Resistors</text>
                    <rect x="255" y="105" width="50" height="25" rx="3" fill="#a29bfe"/>
                    <text x="280" y="122" text-anchor="middle" font-size="8" fill="#333">MOSFETs</text>
                    <rect x="320" y="75" width="65" height="55" rx="3" fill="#74b9ff"/>
                    <text x="352" y="100" text-anchor="middle" font-size="9" fill="#333">ESP32</text>
                    <text x="352" y="115" text-anchor="middle" font-size="8" fill="#333">XIAO C3</text>

                    <!-- Arrow 2 -->
                    <path d="M 400 100 Q 450 100 450 60 Q 450 20 500 20 L 550 20" stroke="#0984e3" stroke-width="3" fill="none"/>
                    <polygon points="550,20 540,14 540,26" fill="#0984e3"/>
                    <text x="475" y="55" text-anchor="middle" font-size="10" fill="#333">WiFi</text>

                    <!-- Cloud/Internet -->
                    <ellipse cx="620" cy="20" rx="60" ry="20" fill="#dfe6e9" stroke="#b2bec3" stroke-width="2"/>
                    <text x="620" y="25" text-anchor="middle" font-size="11" fill="#333">Internet</text>

                    <!-- Arrow 3 -->
                    <line x1="680" y1="20" x2="740" y2="20" stroke="#6c5ce7" stroke-width="3"/>
                    <polygon points="740,20 730,14 730,26" fill="#6c5ce7"/>

                    <!-- Server -->
                    <rect x="750" y="5" width="120" height="50" rx="5" fill="#6c5ce7" stroke="#5f4fcf" stroke-width="2"/>
                    <text x="810" y="25" text-anchor="middle" font-size="11" fill="#fff" font-weight="bold">Server</text>
                    <text x="810" y="42" text-anchor="middle" font-size="9" fill="#ddd">ngrok + Node.js</text>

                    <!-- Arrow 4 -->
                    <line x1="810" y1="55" x2="810" y2="95" stroke="#e84393" stroke-width="3"/>
                    <polygon points="810,95 804,85 816,85" fill="#e84393"/>

                    <!-- ChatGPT -->
                    <rect x="750" y="105" width="120" height="50" rx="5" fill="#10a37f" stroke="#0d8a6a" stroke-width="2"/>
                    <text x="810" y="125" text-anchor="middle" font-size="11" fill="#fff" font-weight="bold">ChatGPT</text>
                    <text x="810" y="142" text-anchor="middle" font-size="9" fill="#ddd">OpenAI API</text>

                    <!-- Power from batteries -->
                    <rect x="240" y="165" width="80" height="25" rx="3" fill="#fdcb6e" stroke="#f39c12" stroke-width="1"/>
                    <text x="280" y="182" text-anchor="middle" font-size="9" fill="#333">4× AAA = 6V</text>
                    <line x1="280" y1="165" x2="280" y2="160" stroke="#e74c3c" stroke-width="2"/>
                    <polygon points="280,160 276,168 284,168" fill="#e74c3c"/>
                </svg>
            </div>
        </div>

        <!-- Actual PCB Photo -->
        <div class="diagram-section">
            <h2>The Actual PCB</h2>
            <div style="text-align: center; margin: 20px 0;">
                <img src="../pcb/built.png" alt="TI-84 HACKS ANDYPANDY 2025 PCB" style="max-width: 100%; border-radius: 10px; box-shadow: 0 4px 20px rgba(0,0,0,0.3);"/>
            </div>
            <p style="text-align: center; color: #aaa; margin-top: 15px;">
                Custom PCB with ESP32 XIAO C3, 4× 1kΩ resistors, and 2× MOSFETs for level shifting
            </p>
        </div>

        <!-- PCB Layout Diagram -->
        <div class="diagram-section">
            <h2>PCB Layout & Wire Connections</h2>
            <div class="svg-container">
                <svg width="100%" height="400" viewBox="0 0 800 400">
                    <rect width="800" height="400" fill="#f8f9fa"/>

                    <!-- PCB Board -->
                    <rect x="150" y="100" width="500" height="180" rx="8" fill="#2e8b57" stroke="#1e5f3c" stroke-width="3"/>

                    <!-- PCB Label -->
                    <text x="200" y="130" font-family="monospace" font-size="14" fill="#fff" font-weight="bold">TI-84 HACKS</text>
                    <text x="200" y="148" font-family="monospace" font-size="12" fill="#fff">ANDYPANDY</text>
                    <text x="200" y="166" font-family="monospace" font-size="12" fill="#ccc">2025</text>

                    <!-- Wire Pads Labels on PCB -->
                    <rect x="170" y="200" width="35" height="20" rx="3" fill="#333"/>
                    <text x="187" y="214" text-anchor="middle" font-size="10" fill="#e74c3c" font-weight="bold">5V</text>

                    <rect x="210" y="200" width="35" height="20" rx="3" fill="#333"/>
                    <text x="227" y="214" text-anchor="middle" font-size="10" fill="#3498db" font-weight="bold">GND</text>

                    <rect x="250" y="200" width="35" height="20" rx="3" fill="#333"/>
                    <text x="267" y="214" text-anchor="middle" font-size="10" fill="#f1c40f" font-weight="bold">TIP</text>

                    <rect x="290" y="200" width="40" height="20" rx="3" fill="#333"/>
                    <text x="310" y="214" text-anchor="middle" font-size="10" fill="#27ae60" font-weight="bold">RING</text>

                    <!-- Resistors (4x) -->
                    <g transform="translate(360, 130)">
                        <rect x="0" y="0" width="60" height="12" rx="2" fill="#f5deb3" stroke="#8b7355" stroke-width="1"/>
                        <rect x="10" y="2" width="5" height="8" fill="#8b4513"/>
                        <rect x="18" y="2" width="5" height="8" fill="#000"/>
                        <rect x="26" y="2" width="5" height="8" fill="#8b4513"/>
                        <rect x="34" y="2" width="5" height="8" fill="#ffd700"/>
                        <text x="75" y="10" font-size="9" fill="#333">R1 1kΩ</text>
                    </g>
                    <g transform="translate(360, 150)">
                        <rect x="0" y="0" width="60" height="12" rx="2" fill="#f5deb3" stroke="#8b7355" stroke-width="1"/>
                        <rect x="10" y="2" width="5" height="8" fill="#8b4513"/>
                        <rect x="18" y="2" width="5" height="8" fill="#000"/>
                        <rect x="26" y="2" width="5" height="8" fill="#8b4513"/>
                        <rect x="34" y="2" width="5" height="8" fill="#ffd700"/>
                        <text x="75" y="10" font-size="9" fill="#333">R2 1kΩ</text>
                    </g>
                    <g transform="translate(360, 170)">
                        <rect x="0" y="0" width="60" height="12" rx="2" fill="#f5deb3" stroke="#8b7355" stroke-width="1"/>
                        <rect x="10" y="2" width="5" height="8" fill="#8b4513"/>
                        <rect x="18" y="2" width="5" height="8" fill="#000"/>
                        <rect x="26" y="2" width="5" height="8" fill="#8b4513"/>
                        <rect x="34" y="2" width="5" height="8" fill="#ffd700"/>
                        <text x="75" y="10" font-size="9" fill="#333">R3 1kΩ</text>
                    </g>
                    <g transform="translate(360, 190)">
                        <rect x="0" y="0" width="60" height="12" rx="2" fill="#f5deb3" stroke="#8b7355" stroke-width="1"/>
                        <rect x="10" y="2" width="5" height="8" fill="#8b4513"/>
                        <rect x="18" y="2" width="5" height="8" fill="#000"/>
                        <rect x="26" y="2" width="5" height="8" fill="#8b4513"/>
                        <rect x="34" y="2" width="5" height="8" fill="#ffd700"/>
                        <text x="75" y="10" font-size="9" fill="#333">R4 1kΩ</text>
                    </g>

                    <!-- MOSFETs (hidden under resistors, small) -->
                    <rect x="360" y="220" width="25" height="15" rx="2" fill="#333" stroke="#555" stroke-width="1"/>
                    <text x="372" y="232" text-anchor="middle" font-size="6" fill="#fff">Q1</text>
                    <rect x="395" y="220" width="25" height="15" rx="2" fill="#333" stroke="#555" stroke-width="1"/>
                    <text x="407" y="232" text-anchor="middle" font-size="6" fill="#fff">Q2</text>
                    <text x="390" y="255" text-anchor="middle" font-size="9" fill="#333">MOSFETs</text>

                    <!-- ESP32 Module -->
                    <rect x="500" y="120" width="130" height="140" rx="5" fill="#1a5276" stroke="#154360" stroke-width="2"/>
                    <rect x="555" y="105" width="40" height="20" rx="3" fill="#aaa" stroke="#888" stroke-width="1"/>
                    <text x="575" y="118" text-anchor="middle" font-size="8" fill="#333">USB-C</text>
                    <text x="565" y="155" text-anchor="middle" font-size="11" fill="#fff" font-weight="bold">ESP32</text>
                    <text x="565" y="172" text-anchor="middle" font-size="10" fill="#ddd">XIAO C3</text>
                    <text x="565" y="195" text-anchor="middle" font-size="8" fill="#74b9ff">WiFi + BLE</text>
                    <text x="565" y="210" text-anchor="middle" font-size="8" fill="#74b9ff">3.3V Logic</text>
                    <!-- Antenna area -->
                    <rect x="595" y="125" width="30" height="50" fill="none" stroke="#f39c12" stroke-width="1" stroke-dasharray="3,2"/>
                    <text x="610" y="155" text-anchor="middle" font-size="7" fill="#f39c12">ANT</text>

                    <!-- Wires coming out -->
                    <!-- Red Wire (5V) -->
                    <line x1="187" y1="220" x2="187" y2="320" stroke="#e74c3c" stroke-width="4"/>
                    <circle cx="187" cy="320" r="6" fill="#e74c3c"/>

                    <!-- Blue Wire (GND) -->
                    <line x1="227" y1="220" x2="227" y2="340" stroke="#3498db" stroke-width="4"/>
                    <circle cx="227" cy="340" r="6" fill="#3498db"/>

                    <!-- Yellow Wire (TIP) -->
                    <line x1="267" y1="220" x2="267" y2="360" stroke="#f1c40f" stroke-width="4"/>
                    <circle cx="267" cy="360" r="6" fill="#f1c40f"/>

                    <!-- Green Wire (RING) -->
                    <line x1="310" y1="220" x2="310" y2="380" stroke="#27ae60" stroke-width="4"/>
                    <circle cx="310" cy="380" r="6" fill="#27ae60"/>

                    <!-- Wire destination labels -->
                    <text x="187" y="335" text-anchor="middle" font-size="10" fill="#e74c3c" font-weight="bold">→ Battery +</text>
                    <text x="227" y="355" text-anchor="middle" font-size="10" fill="#3498db" font-weight="bold">→ Battery −</text>
                    <text x="267" y="375" text-anchor="middle" font-size="10" fill="#b7950b" font-weight="bold">→ Link Port TIP</text>
                    <text x="310" y="395" text-anchor="middle" font-size="10" fill="#1e8449" font-weight="bold">→ Link Port RING</text>

                    <!-- Connection indicators -->
                    <!-- Battery icon -->
                    <g transform="translate(50, 300)">
                        <rect x="0" y="0" width="60" height="30" rx="3" fill="#f39c12" stroke="#d68910" stroke-width="2"/>
                        <rect x="60" y="8" width="8" height="14" rx="2" fill="#d68910"/>
                        <text x="30" y="12" text-anchor="middle" font-size="8" fill="#fff">4×AAA</text>
                        <text x="30" y="24" text-anchor="middle" font-size="10" fill="#fff" font-weight="bold">6V</text>
                    </g>
                    <line x1="110" y1="315" x2="180" y2="320" stroke="#e74c3c" stroke-width="2" stroke-dasharray="5,3"/>
                    <line x1="110" y1="315" x2="220" y2="340" stroke="#3498db" stroke-width="2" stroke-dasharray="5,3"/>

                    <!-- Link port icon -->
                    <g transform="translate(50, 360)">
                        <rect x="0" y="0" width="60" height="25" rx="3" fill="#7f8c8d" stroke="#5d6d7e" stroke-width="2"/>
                        <circle cx="20" cy="12" r="5" fill="#2c3e50"/>
                        <circle cx="40" cy="12" r="5" fill="#2c3e50"/>
                        <text x="30" y="10" text-anchor="middle" font-size="6" fill="#fff">T</text>
                        <text x="30" y="18" text-anchor="middle" font-size="6" fill="#fff">R</text>
                    </g>
                    <text x="80" y="400" text-anchor="middle" font-size="9" fill="#333">Link Port</text>
                    <line x1="110" y1="372" x2="260" y2="360" stroke="#f1c40f" stroke-width="2" stroke-dasharray="5,3"/>
                    <line x1="110" y1="372" x2="303" y2="380" stroke="#27ae60" stroke-width="2" stroke-dasharray="5,3"/>

                    <!-- Title for components -->
                    <text x="390" y="270" text-anchor="middle" font-size="10" fill="#333" font-style="italic">Pull-up Resistors</text>
                </svg>
            </div>

            <!-- Wire Legend -->
            <div class="wire-legend">
                <div class="wire-item">
                    <div class="wire-color" style="background: #e74c3c;"></div>
                    <div class="wire-info">
                        <h4>RED — 5V Power</h4>
                        <p>Connects to battery <strong>positive (+)</strong> terminal. Powers the ESP32 module. TI-84 uses 4×AAA batteries = 6V, but ESP32 has onboard regulator.</p>
                    </div>
                </div>
                <div class="wire-item">
                    <div class="wire-color" style="background: #3498db;"></div>
                    <div class="wire-info">
                        <h4>BLUE — GND (Ground)</h4>
                        <p>Connects to battery <strong>negative (−)</strong> terminal. Common ground reference for all circuits. Essential for signal integrity.</p>
                    </div>
                </div>
                <div class="wire-item">
                    <div class="wire-color" style="background: #f1c40f;"></div>
                    <div class="wire-info">
                        <h4>YELLOW — TIP (Data Line 1)</h4>
                        <p>Connects to TI-84 link port <strong>TIP</strong> pin. Bidirectional data signal. Used for clock/data in TI link protocol.</p>
                    </div>
                </div>
                <div class="wire-item">
                    <div class="wire-color" style="background: #27ae60;"></div>
                    <div class="wire-info">
                        <h4>GREEN — RING (Data Line 2)</h4>
                        <p>Connects to TI-84 link port <strong>RING</strong> pin. Bidirectional data signal. Works with TIP for 2-wire serial communication.</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Component Details -->
        <div class="diagram-section">
            <h2>Component Functions</h2>
            <div class="component-grid">
                <div class="component-card">
                    <h4>4× Resistors (1kΩ)</h4>
                    <p><strong>Pull-up resistors</strong> — Keep TIP and RING lines HIGH when idle. When MOSFET turns ON, it pulls the line LOW. This creates the digital signals.</p>
                    <div class="equation-box">$V_{HIGH} = 3.3V$ when idle</div>
                </div>
                <div class="component-card">
                    <h4>2× MOSFETs</h4>
                    <p><strong>Level shifters</strong> — Allow bidirectional communication between 3.3V ESP32 and TI-84. Acts as electronic switches controlled by voltage.</p>
                    <div class="equation-box">$R_{ON} \approx 100\Omega$</div>
                </div>
                <div class="component-card">
                    <h4>ESP32 XIAO C3</h4>
                    <p><strong>WiFi microcontroller</strong> — The brain that connects to WiFi, talks to the server, and communicates with the calculator via TIP/RING.</p>
                    <div class="equation-box">$V_{logic} = 3.3V$</div>
                </div>
            </div>
        </div>

        <!-- RC Circuit Connection -->
        <div class="diagram-section">
            <h2>Why RC Circuits Matter Here</h2>
            <div class="svg-container">
                <svg width="100%" height="250" viewBox="0 0 700 250">
                    <rect width="700" height="250" fill="#fff"/>

                    <!-- Signal timing diagram -->
                    <text x="350" y="25" text-anchor="middle" font-size="14" fill="#333" font-weight="bold">Signal Timing on TIP/RING Lines</text>

                    <!-- Ideal signal -->
                    <text x="50" y="70" font-size="11" fill="#333">Ideal:</text>
                    <line x1="100" y1="60" x2="150" y2="60" stroke="#27ae60" stroke-width="2"/>
                    <line x1="150" y1="60" x2="150" y2="90" stroke="#27ae60" stroke-width="2"/>
                    <line x1="150" y1="90" x2="250" y2="90" stroke="#27ae60" stroke-width="2"/>
                    <line x1="250" y1="90" x2="250" y2="60" stroke="#27ae60" stroke-width="2"/>
                    <line x1="250" y1="60" x2="350" y2="60" stroke="#27ae60" stroke-width="2"/>

                    <!-- Actual signal with RC -->
                    <text x="50" y="150" font-size="11" fill="#333">Actual:</text>
                    <path d="M 100 140 L 150 140 L 150 145 Q 165 170 180 170 L 250 170 L 250 165 Q 265 140 280 140 L 350 140"
                          stroke="#e74c3c" stroke-width="2" fill="none"/>

                    <!-- Annotations -->
                    <line x1="150" y1="175" x2="180" y2="175" stroke="#666" stroke-width="1"/>
                    <text x="165" y="195" text-anchor="middle" font-size="10" fill="#666">Rise time</text>
                    <text x="165" y="210" text-anchor="middle" font-size="10" fill="#666">τ = RC</text>

                    <!-- Equations -->
                    <rect x="400" y="50" width="280" height="180" rx="8" fill="#f8f9fa" stroke="#ddd" stroke-width="1"/>
                    <text x="540" y="75" text-anchor="middle" font-size="12" fill="#333" font-weight="bold">Time Constant</text>
                    <text x="540" y="105" text-anchor="middle" font-size="14" fill="#2c3e50">τ = RC = (1kΩ)(15pF)</text>
                    <text x="540" y="130" text-anchor="middle" font-size="16" fill="#e74c3c" font-weight="bold">τ = 15 nanoseconds</text>

                    <text x="540" y="160" text-anchor="middle" font-size="12" fill="#333" font-weight="bold">Rise Time (10% → 90%)</text>
                    <text x="540" y="185" text-anchor="middle" font-size="14" fill="#2c3e50">t_r = 2.2τ ≈ 33 ns</text>
                    <text x="540" y="215" text-anchor="middle" font-size="11" fill="#666">Fast enough for TI link protocol!</text>
                </svg>
            </div>
            <p style="text-align: center; color: #aaa; margin-top: 15px;">
                The 1kΩ resistors and parasitic capacitance form an RC circuit that affects signal timing.
                If τ is too large, bits get corrupted. The chosen values ensure reliable communication.
            </p>
        </div>

    </div>
</body>
</html>
